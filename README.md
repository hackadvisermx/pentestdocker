# Pentestdocker 2023

<img alt="Banner" src="img/pentestdocker.png">

<img alt="GitHub - Tamaño del código en bytes" src="https://img.shields.io/github/languages/code-size/hackadvisermx/pentestdocker">

Pentestdocker, es una imagen docker con las herramientas más usadas para CTF, Pentesting, Bug Bounty, para ser desplegada fácil y rápidamente en diferentes entornos.

Nota: Pentestdocker puede ser [desplegado en la nube](cloud_deploy.md) de Google o Digital Ocean, se anexa un [cupon de crédito gratuito para Digital Ocean](https://m.do.co/c/f5c826d4fb68)

# Tabla de Contenido

- [Características](#características)
- [Requerimientos](#requerimientos)
- [Utilerías Instaladas](#utilerías-instaladas)
- [Como usar](#como-usar)
  - [Clonando el repositorio](#Clonando-el-repositorio)
  - [Descargando de dockerhub](#Descargando-de-dockerhub)
  - [Consideraciones al usar pentestdocker](#Consideraciones-al-usar-pentestdocker)
     - [1.Pentesting local](#1.Pentesting-local)
     - [2.Pentesting vpn y proxy](#2.Pentesting-vpn-y-proxy)
- [Despliegue en la nube](cloud_deploy.md)
- [Cosas por hacer](#cosas-por-hacer)
- [Agradecimientos](#agradecimientos)

## Características

- Cuenta con herramientas para CTF, Pentesting y Bug Bounty
- Conexión a plataformas CTF como hackthebox y tryhackme
- Servicios de proxy para enviar tráfico web para analisis local con burpsuite 
- Uso de shell zsh con diferentes plugins

## Requerimientos

- Tener instalado el servicio de docker
  - Probado en docker desktop for Mac 3.10 (51484), Enginie 20.10.2

## Utilerías instaladas

### Utilerías del sistema

- apache2
- ccat
- chromium-browser
- cifs-utils
- curl
- dos2unix
- jq
- ftp
- [gotop](https://github.com/xxxserxxx/gotop)
- html2text
- htop
- locate
- lsof
- nano
- neofetch
- p7zip
- rdate
- squid
- ssh
- tmux
- tree
- vim
- wget
- unrar
- unzip
- xcplip
- zsh, [oh-my-zsh](https://github.com/ohmyzsh/ohmyzsh)

### Utilerias de red

- [chisel](https://github.com/jpillora/chisel)
- dnsenum
- dnstools (dig, nslookup)
- fping
- host
- iputils-ping
- netcat
- netcat (win:nc32.exe,nc64.exe)
- net-tools (arp, ifconfig, iptunnel)
- openvpn
- prips
- rlwrap
- socat
- tcpdump
- telnetsql
- traceroute
- whois

### Herramientas de desarrollo

- awscli
- git
- [go - 1.17.5](https://golang.org/dl/)
- nodejs
- mysql-client
- php
- python2
- python3
- python3-pip
- ruby 
- sqlite3

### Recon & Enumeration

- [anew](https://github.com/tomnomnom/anew)
- [aquatone](https://github.com/michenriksen/aquatone/)
- [amass](https://github.com/OWASP/Amass/)
- [cmseek](https://github.com/Tuhinshubhra/CMSeeK)
- [dirsearch](https://github.com/maurosoria/dirsearch)
- [enum4linux] (https://github.com/CiscoCXSecurity/enum4linux)
- [finddomain](https://github.com/Findomain/Findomain/)
- [ffuf](https://github.com/ffuf/ffuf) 
- [gowitness](https://github.com/sensepost/gowitness)
- [gobuster](https://github.com/OJ/gobuster)
- [httpx](https://github.com/projectdiscovery/httpx/)
- [joomscan](https://github.com/OWASP/joomscan)
- [linenum](https://github.com/rebootuser/LinEnum)
- [linpeas](https://github.com/carlospolop/PEASS-ng/releases/download/refs%2Fpull%2F253%2Fmerge/linpeas.sh)
- knockpy ??
- nbtscan
- nikto
- [nuclei](https://github.com/projectdiscovery/nuclei)
- recon-ng
- shodan ??
- smbclient
- smbmap
- [subfinder](https://github.com/projectdiscovery/subfinder)
- [Sublist3r](https://github.com/aboul3la/Sublist3r)
- waybackurls
- wfuzz
- wpscan
- whatweb

#### Scanning

- mƒ√can
- [naabu](https://github.com/projectdiscovery/naabu/)
- nmap

### Forensic/Stego

- binwalk
- exiftool
- foremost
- hexeditor
- pngcheck
- steghide
- strings
- ztesg

#### Explotation

- crackmapexec
- evil-winrm
- fcrackzip
- hashcat
- hashid
- hydra
- [impacket](https://github.com/SecureAuthCorp/impacket)
- john
- medusa
- [metasploit](https://github.com/rapid7/metasploit-omnibus)
- [php-reverse-shell](https://github.com/pentestmonkey/php-reverse-shell)
- [pspy](https://github.com/DominicBreuker/pspy/)
- [rsactftool](https://github.com/Ganapati/RsaCtfTool)
- [searchsplotit](https://github.com/offensive-security/exploitdb)

#### Reversing / Pwning

- apktool
- checksec
- gdb
- ltrace
- strace
- [pwndbg](https://github.com/pwndbg/pwndbg)
- [pwntools](https://docs.pwntools.com/en/latest/)
- radare2

### Wordlists

- cewl
- Wordlists
  - [dirb](https://github.com/v0re/dirb/tree/master/wordlists)
  - [SecLists](https://github.com/danielmiessler/SecLists)
  
## Como usar

### Clonando el repositorio

Clonar el repositorio y construir la imagen de **pentestdocker** localmente:

```bash
git clone https://github.com/hackadvisermx/pentestdocker.git
cd pentestdocker
docker build -t pentestdocker .
docker run --rm -it -name pentestdocker pentestdocker /bin/zsh
```

### Descargando de dockerhub

Descargar la imagen preconstruida de **pentestdocker** desde dockerhub:

```bash
docker pull hackadvisermx/pentestdocker
docker run --rm -it -name pentestdocker hackadvisermx/pentestdocker /bin/zsh
```

### Consideraciones al usar pentestdocker

#### 1.Pentesting local

Puedes utilizar el contenedor para pentesting en red local, exponiendo el puerto 80, con persistencia de datos en la carpeta /hackdata:

``` bash
docker run --rm -it --name pentestdocker -p 80:80 -v /ruta/hackdata:/root/hackdata \
hackadvisermx/pentest-docker /bin/zsh
```

#### 2.Pentesting vpn y proxy

Puedes usar **pentestdocker** con soporte vpn, o modo ctf (hackthebox, tryhackme), con el puerto 80 expuesto y persistencia de datos en la carpeta /hackdata. Exponiendo el puerto 3128 para proxy squid lo que permite acceder a http/https de las máquinas dentro de la vpn, además exponiendo el rango de puertos 8080-8090 para servicios adicionales:

``` bash
docker run --rm -it --name pentest --cap-add=NET_ADMIN --device=/dev/net/tun \
--sysctl net.ipv6.conf.all.disable_ipv6=0  -v /ruta/vpn:/root/vpn -v /ruta/hackdata:/root/hackdata \
-p 3128:3128 -p 80:80 -p8080-8090:8080-8090 hackadvisermx/pentestdocker /bin/zsh
```

Una vez dentro del contenedor puedes usar los alias definidos shell/alias, de la siguiente forma:

```
apacheup    - iniciar servidor apache
squidup     - iniciar proxy squid
vpnhtb      - conectar a vpn de hackthebox
vpntry      - conectar a vpn de tryhackme
vpncli      - conectar a vpn personalizada
```

- Notas generales para 1 y 2:
  - _/ruta/vpn_, es la ruta donde están los archivos .ovpn, ahí se guarda el historial del shell también.
  - _/ruta/hackdata_, es la ruta donde estan los archivos de trabajo, poner ahí lo que se desea persistir entre contenedor y host local  

## Agradecimientos

- Arsenio Aguirre: su repo ha sido mi inspiración: https://github.com/aaaguirrep/offensive-docker
- Leandro Pintos: su repo igual me ha servido de base: https://github.com/l34r00t

## Cosas por hacer

- Usar pipenv para un mejor control de dependencias en la instalación de las utilerías python.
- Analizar entre descargar y compilar o bajar el release de la herramienta (reducir tiempo vs herramienta actualizada).
- Automatizar la verificación de las últimas versiones de las herramientas.
- Personalizar las configuraciones de algunas herramientas: api keys, tokens, etc.
- Desplegar el **pentestdocker** en la nube de amazon y microsoft
- Mejorar la documentación.
- Abrir a la colaboración (pull requests).

[Tabla de Contenido](#tabla-de-contenido)